<!-- database_management.html -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Database Management with Python | Study Notes</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            max-width: 960px;
            margin: 0 auto;
            padding: 25px;
            background: linear-gradient(to bottom, #f9fafb, #eef2ff);
            color: #1f2937;
        }
        h1 {
            color: #1e40af;
            text-align: center;
            border-bottom: 5px solid #6366f1;
            padding-bottom: 12px;
            margin-bottom: 2.5rem;
        }
        h2 {
            color: #1d4ed8;
            background: #dbeafe;
            padding: 12px 18px;
            border-radius: 10px;
            margin: 2.2rem 0 1.2rem;
        }
        h3 {
            color: #2563eb;
            margin-top: 1.8rem;
        }
        pre {
            background: #1e293b;
            color: #f3f4f6;
            padding: 16px 20px;
            border-radius: 10px;
            overflow-x: auto;
            font-family: 'Consolas', 'Courier New', monospace;
            font-size: 0.97rem;
            box-shadow: 0 4px 14px rgba(0,0,0,0.12);
            border: 1px solid #374151;
        }
        code {
            background: #e5e7eb;
            padding: 3px 7px;
            border-radius: 5px;
            font-family: 'Consolas', monospace;
            color: #111827;
        }
        .tip {
            background-color: #ecfdf5;
            border-left: 5px solid #10b981;
            padding: 14px 18px;
            margin: 1.4rem 0;
            border-radius: 8px;
        }
        .warning {
            background-color: #fee2e2;
            border-left: 5px solid #ef4444;
            padding: 14px 18px;
            margin: 1.4rem 0;
            border-radius: 8px;
        }
        .note {
            background-color: #fefce8;
            border-left: 5px solid #eab308;
            padding: 14px 18px;
            margin: 1.4rem 0;
            border-radius: 8px;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 1.8rem 0;
            font-size: 0.98rem;
        }
        th, td {
            border: 1px solid #d1d5db;
            padding: 12px;
            text-align: left;
        }
        th {
            background-color: #4f46e5;
            color: white;
        }
        tr:nth-child(even) {
            background-color: #f3f4f6;
        }
        .back-link {
            display: inline-block;
            margin: 3rem 0 1rem;
            padding: 12px 24px;
            background: #4f46e5;
            color: white;
            border-radius: 10px;
            text-decoration: none;
            font-weight: bold;
            font-size: 1.1rem;
        }
        .back-link:hover {
            background: #4338ca;
        }
    </style>
</head>
<body>

    <h1>Database Management with Python<br><small>Study Notes</small></h1>

    <p>Python provides excellent support for working with databases — from simple file-based SQLite (built-in) to powerful production databases like PostgreSQL, MySQL, and more.</p>

    <h2>1. SQLite – Built-in & Lightweight</h2>
    <p><code>sqlite3</code> is part of Python's standard library — no installation needed. Ideal for small/medium apps, prototypes, desktop apps, mobile, testing, and learning SQL.</p>

    <h3>Basic Workflow</h3>
    <ol>
        <li>Connect to database (creates file if it doesn't exist)</li>
        <li>Create a cursor object</li>
        <li>Execute SQL commands</li>
        <li>Commit changes (for INSERT/UPDATE/DELETE)</li>
        <li>Close connection</li>
    </ol>

    <h3>Complete CRUD Example</h3>
    <pre><code>import sqlite3

# Connect (creates 'school.db' if not exists)
conn = sqlite3.connect('school.db')
c = conn.cursor()

# Create table
c.execute('''
    CREATE TABLE IF NOT EXISTS students (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        name TEXT NOT NULL,
        age INTEGER,
        grade REAL,
        city TEXT
    )
''')

# INSERT
c.execute("INSERT INTO students (name, age, grade, city) VALUES (?, ?, ?, ?)",
          ('Megan', 22, 9.1, 'Bengaluru'))

c.execute("INSERT INTO students (name, age, grade, city) VALUES (?, ?, ?, ?)",
          ('Aarav', 21, 8.7, 'Mumbai'))

# Commit changes
conn.commit()

# SELECT
c.execute("SELECT * FROM students")
rows = c.fetchall()

for row in rows:
    print(row)          # (1, 'Megan', 22, 9.1, 'Bengaluru'), ...

# Close
conn.close()</code></pre>

    <div class="tip">
        <strong>Best Practice:</strong> Always use <strong>parameterized queries</strong> <code>(?, ?)</code> to prevent <strong>SQL injection</strong>.
    </div>

    <h2>2. Fetching Data – Different Methods</h2>

    <table>
        <tr>
            <th>Method</th>
            <th>Returns</th>
            <th>Use When</th>
        </tr>
        <tr>
            <td><code>fetchone()</code></td>
            <td>Next single row (tuple) or None</td>
            <td>Expecting 0 or 1 result</td>
        </tr>
        <tr>
            <td><code>fetchmany(size)</code></td>
            <td>List of size rows</td>
            <td>Pagination / controlled batches</td>
        </tr>
        <tr>
            <td><code>fetchall()</code></td>
            <td>List of all remaining rows</td>
            <td>Small result sets</td>
        </tr>
    </table>

    <h3>Example – Better Display</h3>
    <pre><code>c.execute("SELECT name, grade FROM students WHERE age > 20")
for name, grade in c.fetchall():
    print(f"{name:<12} | Grade: {grade}")</code></pre>

    <h2>3. Common SQL Commands Cheat Sheet</h2>

    <table>
        <tr><th>Operation</th><th>SQL Example</th></tr>
        <tr><td>CREATE</td><td><code>CREATE TABLE users (id INTEGER PRIMARY KEY, email TEXT UNIQUE)</code></td></tr>
        <tr><td>INSERT</td><td><code>INSERT INTO users (email) VALUES (?)</code></td></tr>
        <tr><td>UPDATE</td><td><code>UPDATE students SET grade = 9.5 WHERE name = 'Megan'</code></td></tr>
        <tr><td>DELETE</td><td><code>DELETE FROM students WHERE id = 3</code></td></tr>
        <tr><td>SELECT</td><td><code>SELECT * FROM students WHERE city = 'Bengaluru' ORDER BY grade DESC</code></td></tr>
        <tr><td>COUNT</td><td><code>SELECT COUNT(*) FROM students</code></td></tr>
        <tr><td>JOIN</td><td><code>SELECT s.name, c.course FROM students s JOIN enrollments e ON s.id = e.student_id JOIN courses c ON e.course_id = c.id</code></td></tr>
    </table>

    <h2>4. When to Use Other Databases / Libraries</h2>

    <div class="note">
        <strong>SQLite → Good for:</strong> Learning, small apps, single-user, embedded systems, no server needed<br>
        <strong>Not ideal for:</strong> High concurrency, very large data, multi-user production apps
    </div>

    <table>
        <tr>
            <th>Database</th>
            <th>Library / Driver</th>
            <th>Best For</th>
            <th>ORM Friendly?</th>
        </tr>
        <tr>
            <td>SQLite</td>
            <td><code>sqlite3</code> (built-in)</td>
            <td>Local / small apps</td>
            <td>Yes</td>
        </tr>
        <tr>
            <td>PostgreSQL</td>
            <td><code>psycopg2</code> or <code>psycopg</code></td>
            <td>Most production apps today</td>
            <td>Excellent</td>
        </tr>
        <tr>
            <td>MySQL / MariaDB</td>
            <td><code>mysql-connector-python</code> or <code>pymysql</code></td>
            <td>Traditional web apps</td>
            <td>Good</td>
        </tr>
        <tr>
            <td>SQL Server</td>
            <td><code>pyodbc</code> or <code>pymssql</code></td>
            <td>Enterprise Windows environments</td>
            <td>Good</td>
        </tr>
    </table>

    <h2>5. Introduction to SQLAlchemy (ORM)</h2>
    <p>SQLAlchemy is the most popular Python SQL toolkit & ORM. It lets you work with objects instead of raw SQL.</p>

    <div class="tip">
        <strong>Quick Peek – Declarative Style</strong>
        <pre><code>from sqlalchemy import create_engine, Column, Integer, String
from sqlalchemy.orm import declarative_base, sessionmaker

Base = declarative_base()

class Student(Base):
    __tablename__ = 'students'
    id = Column(Integer, primary_key=True)
    name = Column(String, nullable=False)
    age = Column(Integer)

engine = create_engine('sqlite:///school_orm.db')
Base.metadata.create_all(engine)

Session = sessionmaker(bind=engine)
session = Session()

new_student = Student(name="Riya", age=20)
session.add(new_student)
session.commit()</code></pre>
    </div>

    <h2>Quick Tips & Best Practices</h2>
    <ul>
        <li>Always close connections (use <code>with</code> statement when possible)</li>
        <li>Use context managers: <code>with sqlite3.connect(...) as conn:</code></li>
        <li>Never concatenate strings into SQL — use parameters</li>
        <li>Keep transactions short</li>
        <li>For production → prefer connection pooling (SQLAlchemy does this well)</li>
    </ul>

    <p style="text-align: center;">
        <a href="Topics.html" class="back-link">← Back to Topics</a>
    </p>

</body>
</html>
